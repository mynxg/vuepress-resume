name: vuepress-theme-resume éƒ¨ç½²æ–‡æ¡£

on:
  push:
    branches:
      - main
jobs:
  deploy-gh-pages:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
      # æ‹‰å– github ä»“åº“ä»£ç 
        uses: actions/checkout@v3
        with:
         # â€œæœ€è¿‘æ›´æ–°æ—¶é—´â€ ç­‰ git æ—¥å¿—ç›¸å…³ä¿¡æ¯ï¼Œéœ€è¦æ‹‰å–å…¨éƒ¨æäº¤è®°å½•
          fetch-depth: 0
          # å¦‚æœä½ æ–‡æ¡£éœ€è¦ Git å­æ¨¡å—ï¼Œå–æ¶ˆæ³¨é‡Šä¸‹ä¸€è¡Œ
          # submodules: true

      # è®¾å®š node ç¯å¢ƒ
      - name: è®¾ç½® Node.js
        uses: actions/setup-node@v3
        with:
         # é€‰æ‹©è¦ä½¿ç”¨çš„ node ç‰ˆæœ¬
          # node-version: ${{ matrix.node-version }}
          node-version: 18
          # è®¾ç½®å‘åŒ… npm åœ°å€ä»“åº“
          registry-url: https://registry.npmjs.org
          # ç¼“å­˜ npm ä¾èµ–
          cache: npm
      # å®‰è£…ä¾èµ–ï¼Œç›¸å½“äº npm ci
      - name: Install dependencies ğŸ“¦ï¸
        run: npm install
        
      # æ‰§è¡Œæ„å»ºæ­¥éª¤
      # è¿è¡Œæ„å»ºè„šæœ¬
      - name: æ„å»ºæ–‡æ¡£
        env:
          NODE_OPTIONS: --max_old_space_size=8192
        run: |-
          npm run build
          
      - name: web deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.ACCESS_TOKEN }}
          publish_branch: gh_pages
          publish_dir: ./dist
          commit_message: auto deploy